SUBROUTINE U_INITIALISE(THREAD.ID)
** INFORMATION ****************************************************************
*   Routine Name : U_INITIALISE
*           Type : SUBROUTINE
*         Params : THREAD.ID
*            Loc : UTIL.BP
** AUDIT **********************************************************************
*   Info Updated : 20200922 at 17.39.44 in DEV by root
*                : on mercury.local (Mac)
*******************************************************************************

$INCLUDE UTIL.BP I_UTIL.H
* CRT "U_INITIALISE ":U_INITIALISED

   IF NOT(U_INITIALISED) THEN

* CRT "INIT"

      FN.UTIL.CONFIG = "UTIL.CONFIG"
      FV.UTIL.CONFIG = ""

      OPEN FN.UTIL.CONFIG TO FV.UTIL.CONFIG ELSE
         FN.FILENAME = FN.UTIL.CONFIG
         GOSUB REPORT.ERROR
      END

      FN.UTIL.LOG.EVENT = "UTIL.LOG.EVENT"
      FV.LOG.EVENT = ""

      OPEN FN.UTIL.LOG.EVENT TO FV.UTIL.LOG.EVENT ELSE
         FN.FILENAME = FN.UTIL.LOG.EVENT
         GOSUB REPORT.ERROR
      END

      FN.UTIL.LOG.CMD = "UTIL.LOG.CMD"
      FV.LOG.CMD = ""

      OPEN FN.UTIL.LOG.CMD TO FV.UTIL.LOG.CMD ELSE
         FN.FILENAME = FN.UTIL.LOG.CMD
         GOSUB REPORT.ERROR
      END

      U_PROCESS.START.TIME = ""
      U_INITIALISED=@TRUE
      U_LOG.SEQ.NO = 0
   END ELSE
*  CRT "ALREADY INIT"
   END

   U_PROCESS.THREAD.ID = THREAD.ID


   RETURN

REPORT.ERROR:

   ERROR.TEXT = "!ERROR - Unable to Open - ":DQUOTE(FN.FILENAME)
   LOGMSG ERROR.TEXT
   STOP ERROR.TEXT

   RETURN

END
