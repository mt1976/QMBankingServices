PROGRAM U_BUILD.INFO
** INFORMATION ****************************************************************
*   Routine Name : U_BUILD.INFO
*           Type : PROGRAM
*         Params :
*            Loc : UTIL.BP
** AUDIT **********************************************************************
*   Info Updated : 20210218 at 17.47.21 in DEV by root
*                : on mercury.local (Mac)
*******************************************************************************

$INCLUDE UTIL.BP I_UTIL.H
   CALL U_INITIALISE("U_BUILD.INFO")
   CALL U_START("U_BUILD.INFO")

   PNM="U_BUILD.INFO"
   CMD.STRING = CONVERT(SPACE(1), @AM, @SENTENCE)
   IF CMD.STRING<2> = "" THEN
      CALL U_CRT.INFO("ERROR", "Parameters [A specific BP file]")
      CALL U_STOP(PNM)
      STOP
   END

   BP.FILE = CMD.STRING<2>

   STMT.EX1 = "SELECT ":BP.FILE

   FN.UTIL.BP = BP.FILE ; FV.UTIL.BP = "" ; STOP.ON.ERROR = @TRUE ; ERROR.TEXT = ""
   CALL U_IO.OPENFILE(FN.UTIL.BP, FV.UTIL.BP, STOP.ON.ERROR, ERROR.TEXT)

   ID.UTIL.CONFIG = "codeHeader.txt" ; R.UTIL.CONFIG = ""
   CALL U_IO.READ(FV.UTIL.CONFIG, ID.UTIL.CONFIG, R.UTIL.CONFIG, STOP.ON.ERROR, ERROR.TEXT)

   PARAM.LIST = ""



   CALL U_OS.EXECUTE(STMT.EX1, @TRUE)

   PROCESS.LIST = ""
   LOOP
      READNEXT ID.FILE ELSE EXIT
      PROCESS.LIST<-1> = ID.FILE
   REPEAT

   NO.FILES = DCOUNT(PROCESS.LIST, @AM)

   FOR I = 1 TO NO.FILES
      THIS.PROG = PROCESS.LIST<I>
      ID.UTIL.BP = THIS.PROG
      TMP.R.UTIL.CONFIG = R.UTIL.CONFIG
      CALL U_BUILD.INFO.HELPER(FN.UTIL.BP, FV.UTIL.BP, ID.UTIL.BP, R.UTIL.CONFIG)
   NEXT I

   STOP
END
