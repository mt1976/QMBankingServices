PROGRAM U_TEST
** INFORMATION ****************************************************************
*   Routine Name : U_TEST
*           Type : PROGRAM
*         Params :
*            Loc : BP
** AUDIT **********************************************************************
*   Info Updated : 20210228 at 14.27.43 in DEV by root
*                : on mercury.local (Mac)
*******************************************************************************

$INSERT BP I_UTIL.H

   CALL U_INITIALISE("U_TEST")
   CALL U_START("U_TEST")
   CALL U_HEADER("U_TEST")

   TEST.DATE = DATE() ; IS.WORKING.DAY = @FALSE
   CALL U_IS.WORKING.DAY(TEST.DATE, IS.WORKING.DAY)
   CALL U_CRT.INFO("IS WORKING DAY", IS.WORKING.DAY)
   NEXT.DATE = ""
   CALL U_GET.NEXT.WORKING.DAY(TEST.DATE, NEXT.DATE)
   CALL U_CRT.INFO("DATE", TEST.DATE)
   CALL U_CRT.INFO("NEXT", NEXT.DATE)
   CALL U_IS.WORKING.DAY(NEXT.DATE, IS.WORKING.DAY)
   CALL U_CRT.INFO("IS NEXT WORKING DAY", IS.WORKING.DAY)

   OUTPUT.VAL = ""
   CALL U_IO.GET.PROPERTY("util", "cheese", OUTPUT.VAL)
   CALL U_CRT.INFO("util-cheese", OUTPUT.VAL)

   CALL U_CRT.INFO("SYS-1015", SYSTEM(1015))

   *CALL U_DATE.ADD(DATE()+27, "", "", "")
   *CALL U_DATE.ADD(DATE()+27, 2, "", "")
   *CALL U_DATE.ADD(DATE()+27, "", 13, "")
   *CALL U_DATE.ADD(DATE()+27, "", "", 10)
   CALL U_DATE.ADD(DATE()+27, 3, 2, 1)
   IP.ADDR = "" ; CALL U_GET.IP(IP.ADDR)

   tokenValue = "1111111111111111111111111111111"
   CALL U_GEN.TOKEN(tokenValue)
   CALL U_CRT.INFO("tokenValue", tokenValue)
   CALL U_GEN.TOKEN(tokenValue)
   CALL U_CRT.INFO("tokenValue", tokenValue)

   responseContent = "" ; responseCode = ""

   CALL W_SERVICE.ENVIRONMENT("", "", "", responseContent, responseStatus)
   CALL U_CRT.INFO("responseCode", responseCode)
   CALL U_CRT.INFO("responseContent", responseContent)

   CALL U_CRT.INFO("SYS-45", SYSTEM(45))
   CALL U_CRT.INFO("SYS-1012", SYSTEM(1012))

   CALL U_IO.GET.LIST("wct_helper", SYSTEM(45), RETURN.LIST, NO.ITEMS)

   FIND "SAVE" IN RETURN.LIST SETTING POS THEN
      CALL U_CRT.INFO("FOUND SAVE", POS)
   END ELSE
      CALL U_CRT.INFO("FOUND SAVE", "NOT FOUND")
   END

   responseContent = "" ; responseCode = ""

   CALL W_SERVICE.DATAMAP("LIST", "Accounts", "", responseContent, responseStatus)
   CALL U_CRT.INFO("responseCode", responseCode)
   CALL U_CRT.INFO("responseContent", responseContent)

   NO.ITEMS = DCOUNT(responseContent, @AM)
   FOR I = 1 TO NO.ITEMS
*      CALL U_CRT.INFO("rc_":I, responseContent<I>)

      rowData = CHANGE(responseContent<I>, W$SEP, @AM)
      thisresponseContent = "" ; thisresponseCode = ""

*      CALL W_SERVICE.DATAMAP("VIEW", rowData<2>, "", thisresponseContent, thisresponseStatus)
*      CALL U_CRT.INFO("responseCode", thisresponseCode)
*      CALL U_CRT.INFO("responseContent", thisresponseContent)

   NEXT I

*   CALL W_SERVICE.UPLOAD("DO", "BP", "up1.txt", thisresponseContent, thisresponseStatus)

*   CALL W_SERVICE.UPLOAD("DO", "/Users/matttownsend/Development/qm/dev/TEMP2", "up2.txt", thisresponseContent, thisresponseStatus)

   CALL U_CRT.INFO("NEXT", "W_SERVICE.DATAXML")

   responseContent = "" ; responseCode = ""

   TEXT = "NO DATA ({{1}}-{{2}})"
   WILDCARDS=""
   WILDCARDS<1> = "ITEM"
   WILDCARDS<2> = "ITEMVALUE"
   CALL U_MSG(TEXT, WILDCARDS)

   CALL U_CRT.INFO("MSG", TEXT)



   responseContent = "" ; responseCode = ""
   CALL W_SERVICE.DATAMAP("DELETE", "mercury", "", thisresponseContent, thisresponseStatus)
   CALL U_CRT.INFO("responseCode", thisresponseContent)
   CALL U_CRT.INFO("responseContent", thisresponseStatus)

   CALL U_STOP("")
   STOP
END
